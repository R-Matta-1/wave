<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wave</title>
    <style>
   
    p {
      font-size: medium;
      font-family: monospace;
      position: absolute;
    }
    canvas {
      border: 2px solid black;
    }
    #canvas1 {
      display: inline-block;
      margin-top: auto;
    }
    #canvas-container {
      display: flex;
      justify-content: center;
    }
    #canvas2 {
      display: inline-block;
      margin-left: 10px;
    }
    #toolBox {
      display: flex;
      justify-content: center;
    }
    #console {
      position: absolute;
      left: 50px;
      top: 440px;
    }
    #mouseCON{margin-top: 50px;}
    </style>

  </head>
  <body>  
        <p id="console">console</p>
    <div id="canvas-container">
      <canvas id="canvas1"  width= "400" height= "400" 
      onmousedown="mouseDown(event)"
       onmouseup="mouseUp(event)"
        onmousemove="mousePosition(event)"></canvas>

      <canvas id="canvas2"width= "400px" height= "400px"></canvas>
      </div>
    <div id="toolBox" width= "400px" height= "75px">
      <label for="colors">colors:</label>
      <select name="colors" id="colors">
        <option value="#C61111">red</option>
        <option value="#38b000">green</option>
        <option value="#122CC6">blue</option>
        <option value="#000">black</option>
        <option value="#fff">white</option>
      </select>
<input id="noDg" type="text">
<input type="button" value="digit" onclick="digitize()">
<input type="button" value="apply" onclick="apply()">
<input type="button" value="begin" onclick="begin()">
      <p id="mouseCON">mouseCON</p>
    </div>
    
<script >
  const text = document.getElementById("noDg")
  text.value = "#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#122CC6,#fff,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#fff,#122CC6,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff]#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff]#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#123,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff]#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,"+
  "#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff]#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff]#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#38b000,#fff,#fff,#fff,#38b000,#38b000,#122CC6,#38b000,#38b000,#38b000,#fff,#122CC6,#122CC6,#38b000,#38b000,#38b000,#38b000,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#38b000,#38b000,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#38b000,#122CC6,#38b000,#38b000,#122CC6,#122CC6,#fff,#38b000,#122CC6,#122CC6,#122CC6,#38b000,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff]#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff]#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6"+
  ",#122CC6,#122CC6,#122CC6,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff]#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#fff,#fff,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#fff,#fff,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff]#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#fff,#122CC6,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff]#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff]#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,"+
  "#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#fff,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#fff,#fff,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#122CC6,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff]#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff]#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#000,#fff,#000,#fff,#fff,#fff,#fff,#000,#C61111,#000,#C61111,#000,#fff,#fff,#fff,#000,#C61111,#C61111,#C61111,#000,#fff,#fff,#fff,#fff,#000,#C61111,#000,#fff,#fff,#fff,#fff,#fff,#fff,#000,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff]#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff]#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#fff,#122CC6,#fff,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff,#fff,#fff,#122CC6,#122CC6,#122CC6,#fff,#fff,#fff]"
  const colors = document.getElementById("colors")
  var selectedColor;
const sample = document.getElementById("canvas1")
  const sampleCT = sample.getContext('2d')
  sampleCT.translate(0.5, 0.5)
  sampleCT.font = "30px Verdana  ";
  const generator = document.getElementById("canvas2")
  const genCT = generator.getContext('2d')
  genCT.translate(0.5, 0.5)
  genCT.font = "30px Verdana ";
  //rip old toolbox, changed for very profesional reasons
  const console = document.getElementById("console")
  const mouseCON = document.getElementById("mouseCON")
  var districtSize = 400 / 4
  var generatSize = districtSize/2
  const districtBorder = 3
  const pixelBorder = 1
  var allDistrict = []
  var allGen = []
  var mouseDistX=0;
  var mouseDistY=0;
  var mouseDistID=0;
  var mousePixelX=0;
  var mousePixelY=0;
  var mousePixelID=0;
  let upValid;
  let downValid;
  let leftValid;
  let rightValid;
  var baseX;
  var baseY;
  var mouseDrag = false;
  class district {
  constructor(idX, idY, x, y, size) {
    this.idX = idX
    this.idY = idY
    this.x = x
    this.y = y
    this.size = size
    this.allPixel = []
    sampleCT.strokeText(this.idX + ',' + this.idY, this.x+5, this.y + 30);
    for (let y = 0; y < districtSize; y += districtSize / 8) {
      for (let x = 0; x < districtSize; x += districtSize / 8) {
        this.allPixel.push("#fff")
      }
    }
  }
}
class generat {
  constructor(idX, idY, x, y, size) {
    this.idX = idX
    this.idY = idY
    this.x = x
    this.y = y
    this.size = size
  this.options = allDistrict
  this.id = this.idX+(this.idY*(400/generatSize))
    genCT.strokeText(this.id, this.x, this.y + 30)
  }
  update() {

      drawLine(genCT, "black",1,  this.x, this.y,this.x+generatSize, this.y)
      drawLine(genCT, "black",1,  this.x, this.y,this.x, this.y+generatSize)
     
if (times==0) {
  this.options = single(this.options, random(0,this.options.length))
} 


    if (this.options.length == 1||this.options.length == undefined) {
      for (let y = 0; y < generatSize; y += generatSize / 8) {
      for (let x = 0; x < generatSize; x += generatSize / 8) {
      let cp = this.options[0].allPixel[((y/(generatSize / 8))*8)+(x/(generatSize / 8))]
       genCT.fillStyle = cp;
genCT.fillRect(this.x+x,this.y+y,(generatSize / 8)+1,(generatSize / 8)+1) } }
   } 
   //draw else if more then 2
   else {


    genCT.strokeText(this.options.length, this.x, this.y + 30)
    for (let c = 0; c < this.options.length; c++) {
  let selfOpt = this.options[c]
  upValid = 0
  downValid = 0
  leftValid = 0
  rightValid = 0
  //up 
  if (this.idY > 0) {
    for (let i = 0; i < frame[this.id - 8].options.length; i++) {
      let altOpt = frame[this.id - 8].options[i];
      if (altOpt.allPixel[60] == selfOpt.allPixel[4]) {
        upValid++
      }
    }
  } else {upValid++}
  //down
  if (this.idY < 7) {
    for (let i = 0; i < frame[this.id + 8].options.length; i++) {
      let altOpt = frame[this.id + 8].options[i];
      if (altOpt.allPixel[4] == selfOpt.allPixel[60]) {
        downValid++
      }
    }
  } else {downValid++}
  //left
  if (this.idX > 0) {
    for (let i = 0; i < frame[this.id - 1].options.length; i++) {
      let altOpt = frame[this.id - 1].options[i];
      if (altOpt.allPixel[31] == selfOpt.allPixel[24]) {
        leftValid++
    } }
  } else {leftValid++}
  //rightv
  if (this.idX < 7) {
    for (let i = 0; i < frame[this.id + 1].options.length; i++) {
      let altOpt = frame[this.id + 1].options[i];
      if (altOpt.allPixel[24] == selfOpt.allPixel[31]) {
        rightValid++
      }
    }
  } else {rightValid++}
  allDistrict = fuckShit 
// this means 'if any of u are invalid'
 if (upValid == 0 || downValid == 0 || leftValid == 0 || rightValid == 0) {
  ///redo remake not erase not erase not erebjdk
   this.options  = 
   c--
 }
 
  //if (this.options.length > 1) {
   // this.options = single(this.options, random(0, this.options.length))
  //}
 // allDistrict = fuckShit
}genCT.strokeText(this.options.length, this.idX, this.idY + 30)
////
}

  }
}
var times=0
var frame =[]
var fuckShit;
function begin() {
  genCT.clearRect(0,0,400,400)
  fuckShit = allDistrict
  frame =[]
for (let i = 0; i < allGen.length; i++) {
  let cr = allGen[i];
  frame.push(cr)
}
  for (let i = 0; i < allGen.length; i++) {
  
    allGen[i].update()
    times++
    mouseCON.innerHTML = times
  }
  console.innerHTML = fuckShit.length+"and district"+allDistrict.length
}

  for (let y = 0; y < generator.clientHeight; y += districtSize) {
    for (let x = 0; x < sample.clientWidth; x += districtSize) {
      allDistrict.push(new district(x / districtSize, y / districtSize, x, y, districtSize - 1))
      drawLine(sampleCT, "black",5, x, y, x + districtSize, y)
      drawLine(sampleCT, "black",5,  x, y, x, y + districtSize)
    }
  }
  for (let y = 0; y < generator.clientHeight; y += generatSize) {
   for (let x = 0; x < generator.clientWidth; x += generatSize) {
     allGen.push(new generat(x / generatSize, y / generatSize, x, y, generatSize - 1))
   }}
  function drawLine(ctx, color, width, x1, y1, x2, y2) {
    ctx.lineWidth = width;
    ctx.strokeStyle = color;
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.stroke();
  }
  function updateColor() {
    sampleCT.fillStyle="#000"
    sampleCT.fillRect(0,0,400,400)
  console.innerText = "jigs up"
  for (var currentD = 0; currentD < allDistrict.length; currentD++) {
    var district = allDistrict[currentD];
    for (let Pix = 0; Pix < 8 * 8; Pix++) {
      let CurntPxl = district.allPixel[Pix];
      sampleCT.fillStyle = CurntPxl;
      sampleCT.fillRect(((Pix % 8) * districtSize / 8) + district.x,
        (Math.floor(Pix / 8) * districtSize / 8) + district.y,
        (districtSize / 8)-1, (districtSize / 8)-1)
      console.innerText = "jigs maintained " + currentD + "test"
    }
  drawLine(sampleCT,"black",5,districtSize*currentD,(districtSize*currentD)+districtSize,districtSize*currentD,districtSize*currentD)
  drawLine(sampleCT,"black",5,districtSize*currentD,districtSize*currentD,districtSize*currentD,(districtSize*currentD)+districtSize)
  }
//we also need to update the generat
times = 0
for (let i = 0; i < allGen.length; i++) {
  allGen[i].options = allDistrict
} }
  //Mouse stuf<lets hope this dosen't take as long as it usually dose>
  function mousePosition(e) {
baseX = e.clientX - sample.offsetLeft;
baseY =  e.clientY - sample.offsetTop;
    mouseDistX = Math.floor(baseX / (districtSize))
    mouseDistY = Math.floor(baseY / (districtSize))
    mouseDistID = (mouseDistY * (400/districtSize)) + mouseDistX;
    //pixeltime
    mousePixelX = Math.floor(baseX / (districtSize/8))-mouseDistX*8
    mousePixelY = Math.floor(baseY / (districtSize/8))-mouseDistY*8
    mousePixelID = (mousePixelY * 8) + mousePixelX;
    mouseCON.innerHTML = "mouse Distruct id "+ mouseDistID + " mouse Pixel id "+mousePixelID+" thePixelX "+mousePixelX+" thePixelY "+mousePixelY;
    console.innerText = allDistrict[1].allPixel.length
   if (mouseDrag||recentKey=="c") {
     allDistrict[mouseDistID].allPixel[mousePixelID] = selectedColor 
    if(mousePixelID-8>0){ allDistrict[mouseDistID].allPixel[mousePixelID-8] = selectedColor} //else{allDistrict[mouseDistID-(400/districtSize)].allPixel[mousePixelID+8*7] = selectedColor}
    if(mousePixelID+8<64){ allDistrict[mouseDistID].allPixel[mousePixelID+8] = selectedColor} //else{allDistrict[mouseDistID+(400/districtSize)].allPixel[mousePixelID-8*7] = selectedColor}
    if((mousePixelID+1)%8>mousePixelID%8){ allDistrict[mouseDistID].allPixel[mousePixelID+1] = selectedColor} //else{ allDistrict[mouseDistID+1].allPixel[mousePixelID-7] = selectedColor}
     if((mousePixelID-1)%8<mousePixelID%8){ allDistrict[mouseDistID].allPixel[mousePixelID-1] = selectedColor}// else{allDistrict[mouseDistID-1].allPixel[mousePixelID+7] = selectedColor}
     selectedColor = colors.value
        
        updateColor()
        console.innerHTML = selectedColor
    }
  }
  function mouseUp(e) {
    mouseDrag = false
  }
  function mouseDown(e) {
    mouseDrag = true
  }
  function digitize() {
    let gay;
    for (let index = 0; index < allDistrict.length; index++) {
      let crntDist = allDistrict[index];
      if(index==0){gay= crntDist.allPixel} else{gay+= crntDist.allPixel}
      
      gay+="]"
    }
 text.value= gay
  }

  function apply() {
    for (let index = 0; index < allDistrict.length; index++) {
      let crntDist = allDistrict[index];
      for (let P = 0; P < crntDist.allPixel.length; P++) {
        let pixel = crntDist.allPixel[P];
        allDistrict[index].allPixel[P] = text.value.split("]")[index].split(",")[P]
      }
    }
    updateColor()
  }
 function random(min,max) {
  return Math.floor((Math.random() * (max-min)) + min)
 }
  document.onkeydown = keypress;
  function keypress(event) {
    var recentKey = event.key
    mouseCON.innerHTML = event.key
    switch (event.key) {
      case " ":
      
        break;
      default:
        break;
    }
  }
function single(arr,num){

let arry = [0]
arry.unshift(arr[num])
arry.pop()
return arry
}
</script>
  </body>
</html>
