<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wave</title>
    <style>
   
    p {
      font-size: medium;
      font-family: monospace;
      position: absolute;
    }
    canvas {
      border: 2px solid black;
    }
    #canvas1 {
      display: inline-block;
      margin-top: auto;
    }
    #canvas-container {
      display: flex;
      justify-content: center;
    }
    #canvas2 {
      display: inline-block;
      margin-left: 10px;
    }
    #toolBox {
      display: flex;
      justify-content: center;
    }
    #console {
      left: 50px;
      top: 500px;
    }
    </style>

  </head>
  <body>  
        <p id="console">console</p>
    <div id="canvas-container">
      <canvas id="canvas1"  width= "400" height= "400" 
      onmousedown="mouseDown(event)"
       onmouseup="mouseUp(event)"
        onmousemove="mousePosition(event)"></canvas>

      <canvas id="canvas2"width= "400px" height= "400px"></canvas>
      </div>
    <div id="toolBox" width= "400px" height= "75px">

      <p id="mouseCON">mouseCON</p>
    </div>
<script >
const sample = document.getElementById("canvas1")
  const sampleCT = sample.getContext('2d')
  sampleCT.translate(0.5, 0.5)
  sampleCT.font = "30px Verdana  ";
  const generator = document.getElementById("canvas2")
  const genCT = generator.getContext('2d')
  genCT.translate(0.5, 0.5)
  genCT.font = "10px monospace";
  //rip old toolbox, changed for very profesional reasons
  const console = document.getElementById("console")
  const mouseCON = document.getElementById("mouseCON")
  const districtSize = 400 / 4
  const districtBorder = 3
  const pixelBorder = 1
  var allDistrict = []
  var mouseDistX=0;
  var mouseDistY=0;
  var mouseDistID=0;
  var mouseDrag = false;
 
  class district {
    constructor(idX, idY, x, y, size) {
      this.idX = idX
      this.idY = idY
      this.x = x
      this.y = y
      this.size = size
      this.allPixel = []
   
      sampleCT.strokeText(this.idX + ',' + this.idY, this.x, this.y + 20);
      for (let y = this.x; y < districtSize; y += districtSize / 8) {
        for (let x = this.y; x < districtSize; x += districtSize / 8) {
         this.allPixel.push("#789")
        }
      }
    }
  }
  for (let y = 0; y < sample.clientHeight; y += districtSize) {
    for (let x = 0; x < sample.clientWidth; x += districtSize) {
      allDistrict.push(new district(x / districtSize, y / districtSize, x, y, districtSize - 1))
    

      drawLine(sampleCT, "black",5, x, y, x + districtSize, y)
      drawLine(sampleCT, "black",5,  x, y, x, y + districtSize)
    }
  }
  function randomColor() {
    return "#" + (Math.floor(Math.random() * 16777215).toString(16));
  }
  function drawLine(ctx, color, width, x1, y1, x2, y2) {
    ctx.lineWidth = width;
    ctx.strokeStyle = color;
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.stroke();
  }
  function updateColor() {
    console.innerText="jigs up"
    for (let i = 0; i < allDistrict.length; i++) {
      let district = allDistrict[i];
      for (let Pix = 0; Pix < district.allPixel.length; Pix++) {
        let CurntPxl = district.allPixel[Pix];
        sampleCT.fillStyle = CurntPxl;
        sampleCT.fillRect(((Pix%8)*districtSize/8)+district.x,Math.floor(Pix/8*districtSize)*districtSize/8+district.y,districtSize/8,districtSize/8)
      }
    } console.innerText="jigs maintained"
  }
  //Mouse stuf<lets hope this dosen't take as long as it usually dose>
  function mousePosition(e) {
    mouseDistX = Math.floor((e.clientX - sample.offsetLeft) / (districtSize))
    mouseDistY = Math.floor((e.clientY - sample.offsetTop) / (districtSize))
    mouseDistID = (mouseDistY * 4) + mouseDistX
    mouseCON.innerHTML = " x is " + mouseDistX + " y is " + mouseDistY + mouseDrag + mouseDistID;
    console.innerText = allDistrict.length
  }
  function mouseUp(e) {
    mouseDrag = false
  }
  function mouseDown(e) {
    mouseDrag = true
  }
  
  document.onkeydown = keypress;
  function keypress(event) {
    mouseCON.innerHTML = event.key
    switch (event.key) {
      case "c":
        updateColor()
        break;
    
      default:
        break;
    }
  }
</script>
  </body>
</html>
